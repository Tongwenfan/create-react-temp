(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{116:function(e,n,t){"use strict";t.r(n);var a=t(3),i=t.n(a),r=t(6),c=t.n(r),o=t(7),s=t.n(o),l=t(8),m=t.n(l),p=t(9),d=t.n(p),u=t(10),h=t.n(u),g=t(4),f=t.n(g),b=t(11),x=t.n(b),w=t(2),v=t.n(w),y=t(0),E=t.n(y),k=t(21),N=t(17),C=t(22),T=t(28),I=t(1),z=t.n(I),A=(t(66),t(13)),j=t(23),P=t(15),_=function(e){function r(){var e,o;s()(this,r);for(var n=arguments.length,t=new Array(n),a=0;a<n;a++)t[a]=arguments[a];return o=d()(this,(e=h()(r)).call.apply(e,[this].concat(t))),v()(f()(o),"state",{mobileCode:"",userAccount:"",hasAlert:!1,alertText:"",password:"",codeNumber:"",captchaCodeImg:"",showPwd:!0,loginWay:!1}),v()(f()(o),"handleInput",function(e,n){var t=n.target.value,a={};a[e]=t,o.setState(a)}),v()(f()(o),"closeTip",function(){o.setState({hasAlert:!1})}),v()(f()(o),"mobileLogin",c()(i.a.mark(function e(){var n,t,a,r;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(o.state.loginWay){e.next=5;break}if(o.state.userAccount?o.state.password?o.state.codeNumber||(t="请输入验证码",n=!0):(t="请输入密码",n=!0):(t="请输入手机号/邮箱/用户名",n=!0),n)return o.setState({hasAlert:!0,alertText:t}),e.abrupt("return");e.next=5;break;case 5:return a={username:o.state.userAccount,password:o.state.password,captcha_code:o.state.codeNumber},e.next=8,P.a.accountLogin(a);case 8:if((r=e.sent).tip)return o.setState({hasAlert:!0,alertText:r.response.message}),o.state.loginWay||o.getCaptchaCode(),e.abrupt("return");e.next=13;break;case 13:Object(A.d)("user_id",r.user_id),r.imgpath=-1!==r.avatar.indexOf("/")?"/img/"+r.avatar:Object(A.a)(),o.props.saveUserInfo(r),o.props.history.push("/profile");case 17:case"end":return e.stop()}},e)}))),v()(f()(o),"changePasswordType",function(){o.setState({showPwd:!o.state.showPwd})}),v()(f()(o),"getCaptchaCode",c()(i.a.mark(function e(){var n;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P.a.getCaptchaCode();case 2:n=e.sent,o.setState({captchaCodeImg:n.code});case 4:case"end":return e.stop()}},e)}))),v()(f()(o),"goBack",function(){o.props.history.goBack()}),o}return x()(r,e),m()(r,[{key:"componentDidMount",value:function(){this.getCaptchaCode()}},{key:"render",value:function(){return E.a.createElement("div",{className:"login-container"},E.a.createElement(C.a,{title:"密码登录",goBack:this.goBack}),this.state.loginWay?E.a.createElement("form",{className:"login-form"},E.a.createElement("section",{className:"input-container phone-number"},E.a.createElement("input",{type:"text",placeholder:"账户密码随便输入",name:"phone",maxLength:"11",value:this.state.mobileCode}),E.a.createElement("button",null,"获取验证码"))):E.a.createElement("form",{className:"login-form"},E.a.createElement("section",{className:"input-container"},E.a.createElement("input",{type:"text",placeholder:"账号",value:this.state.userAccount,onChange:this.handleInput.bind(this,"userAccount")})),E.a.createElement("section",{className:"input-container"},this.state.showPwd?E.a.createElement("input",{type:"text",placeholder:"密码",value:this.state.password,onChange:this.handleInput.bind(this,"password")}):E.a.createElement("input",{type:"password",placeholder:"密码",value:this.state.password,onChange:this.handleInput.bind(this,"password")}),E.a.createElement("div",{className:"button-switch ".concat(this.state.showPwd?"change-to-text":"")},E.a.createElement("div",{className:"circle-button ".concat(this.state.showPwd?"trans_to_right":""),onClick:this.changePasswordType.bind(this)}),E.a.createElement("span",null,"abc"),E.a.createElement("span",null,"..."))),E.a.createElement("section",{className:"input-container captcha-code-container"},E.a.createElement("input",{type:"text",placeholder:"验证码",maxLength:"4",value:this.state.codeNumber,onChange:this.handleInput.bind(this,"codeNumber")}),E.a.createElement("div",{className:"img-change-img"},E.a.createElement("img",{src:this.state.captchaCodeImg,alt:"img is wrong"}),E.a.createElement("div",{className:"change-img",onClick:this.getCaptchaCode.bind(this)},E.a.createElement("p",null,"换一张"))))),E.a.createElement("p",{className:"login-tips"},"温馨提示: 未注册过的账号, 登录时自动注册"),E.a.createElement("p",{className:"login-tips"},"注册过的用户可凭证账号密码登录"),E.a.createElement("div",{className:"login-button",onClick:this.mobileLogin},"登录"),E.a.createElement(k.a,{to:"/forget",className:"to-forget"},"重置密码?"),this.state.hasAlert&&E.a.createElement(T.a,{logout:function(){return!1},closeTip:this.closeTip,alertText:this.state.alertText}))}}]),r}(y.Component);v()(_,"propTypes",{userInfo:z.a.object.isRequired,saveUserInfo:z.a.func.isRequired});n.default=Object(N.b)(function(e){return e?{userInfo:e.userInfo}:{userInfo:{}}},function(n){return{saveUserInfo:function(e){return n(Object(j.c)(e))}}})(_)},28:function(e,n,t){"use strict";t.d(n,"a",function(){return w});var a=t(7),r=t.n(a),o=t(8),i=t.n(o),c=t(9),s=t.n(c),l=t(10),m=t.n(l),p=t(11),d=t.n(p),u=t(2),h=t.n(u),g=t(0),f=t.n(g),b=t(1),x=t.n(b),w=(t(58),function(e){function n(){return r()(this,n),s()(this,m()(n).apply(this,arguments))}return d()(n,e),i()(n,[{key:"render",value:function(){return f.a.createElement("div",{className:"alert-container"},f.a.createElement("section",{className:"tip-text-container"},f.a.createElement("div",{className:"tip-icon"},f.a.createElement("span",null),f.a.createElement("span",null)),f.a.createElement("div",{className:"tip-text"},this.props.alertText),this.props.logout("wait")?f.a.createElement("div",{className:"logout"},f.a.createElement("div",{onClick:this.props.closeTip},"再等等"),f.a.createElement("div",{onClick:this.props.logout},"狠心离开")):f.a.createElement("div",{className:"confirm",onClick:this.props.closeTip},"确认")))}}]),n}(g.Component));h()(w,"propTypes",{alertText:x.a.string.isRequired,closeTip:x.a.func.isRequired,logout:x.a.func})},58:function(e,n,t){var a=t(59);"string"==typeof a&&(a=[[e.i,a,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};t(20)(a,r);a.locals&&(e.exports=a.locals)},59:function(e,n,t){(n=e.exports=t(19)(!1)).i(t(25),""),n.push([e.i,"@keyframes tipMove {\n  0% {\n    transform: scale(1); }\n  35% {\n    transform: scale(0.8); }\n  70% {\n    transform: scale(1.1); }\n  100% {\n    transform: scale(1); } }\n\n.alert-container {\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  z-index: 200; }\n  .alert-container .tip-text-container {\n    position: absolute;\n    top: 50%;\n    left: 50%;\n    margin-top: -6rem;\n    margin-left: -6rem;\n    width: 12rem;\n    animation: tipMove .4s;\n    background-color: white;\n    padding-top: .6rem;\n    border: 1px;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    flex-direction: column;\n    border-radius: .25rem; }\n    .alert-container .tip-text-container .tip-icon {\n      width: 3rem;\n      height: 3rem;\n      border: .15rem solid #f8cb86;\n      border-radius: 50%;\n      display: flex;\n      justify-content: center;\n      align-items: center;\n      flex-direction: column; }\n      .alert-container .tip-text-container .tip-icon span:nth-of-type(1) {\n        width: 0.12rem;\n        height: 1.5rem;\n        background-color: #f8cb86; }\n      .alert-container .tip-text-container .tip-icon span:nth-of-type(2) {\n        width: 0.2rem;\n        height: 0.2rem;\n        background-color: #f8cb86;\n        border-radius: 50%;\n        border: 1px;\n        margin-top: .2rem; }\n    .alert-container .tip-text-container .tip-text {\n      font-size: 0.7rem;\n      color: #333;\n      text-align: left;\n      line-height: .9rem;\n      text-align: center;\n      margin-top: .8rem;\n      padding: 0 .4rem; }\n    .alert-container .tip-text-container .confirm {\n      font-size: 0.8rem;\n      color: #fff;\n      text-align: left;\n      font-weight: bold;\n      margin-top: .8rem;\n      background-color: #4cd964;\n      width: 100%;\n      text-align: center;\n      border: 1px;\n      line-height: 1.8rem;\n      border-bottom-left-radius: .25rem;\n      border-bottom-right-radius: .25rem; }\n    .alert-container .tip-text-container .logout {\n      display: flex;\n      justify-content: space-between;\n      align-items: center;\n      width: 9rem;\n      margin: 1rem auto;\n      font-family: Helvetica Neue,Tahoma,Arial; }\n      .alert-container .tip-text-container .logout div:nth-of-type(1) {\n        width: 3.8rem;\n        height: 1.6rem;\n        line-height: 1.6rem;\n        border-radius: 5px;\n        font-size: 0.6rem;\n        color: #fff;\n        text-align: center;\n        background: #aaa; }\n      .alert-container .tip-text-container .logout div:nth-of-type(2) {\n        width: 3.8rem;\n        height: 1.6rem;\n        line-height: 1.6rem;\n        border-radius: 5px;\n        font-size: 0.6rem;\n        color: #fff;\n        text-align: center;\n        background: #d8584a; }\n",""])},66:function(e,n,t){var a=t(67);"string"==typeof a&&(a=[[e.i,a,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};t(20)(a,r);a.locals&&(e.exports=a.locals)},67:function(e,n,t){(e.exports=t(19)(!1)).push([e.i,".login-container {\n  padding-top: 1.95rem; }\n  .login-container p, .login-container span, .login-container input {\n    font-family: Helvetica Neue, Tahoma, Arial, serif; }\n\n.login-tips {\n  font-size: 0.5rem;\n  color: red;\n  text-align: left;\n  padding: .4rem .6rem;\n  line-height: .5rem; }\n  .login-tips a {\n    color: #3b95e9; }\n\n.login-button {\n  margin: 0 .5rem 1rem;\n  font-size: 0.7rem;\n  color: #fff;\n  text-align: left;\n  background-color: #4cd964;\n  padding: .5rem 0;\n  border: 1px;\n  border-radius: 0.15rem;\n  text-align: center; }\n\n.button-switch {\n  background-color: #ccc;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  width: 2rem;\n  height: 0.7rem;\n  padding: 0 .2rem;\n  border: 1px;\n  border-radius: 0.5rem;\n  position: relative; }\n  .button-switch .circle-button {\n    transition: all .3s;\n    position: absolute;\n    z-index: 1;\n    left: -0.0rem;\n    top: -0.2rem;\n    background-color: #f1f1f1;\n    width: 1.2rem;\n    height: 1.2rem;\n    border-radius: 50%; }\n  .button-switch .trans_to_right {\n    transform: translateX(1.2rem); }\n  .button-switch span {\n    font-size: 0.45rem;\n    color: #fff;\n    text-align: left;\n    transform: translateY(0.05rem); }\n  .button-switch span:nth-of-type(2) {\n    transform: translateY(-0.08rem); }\n\n.change-to-text {\n  background-color: #4cd964; }\n\n.to-forget {\n  float: right;\n  font-size: 0.6rem;\n  color: #3b95e9;\n  text-align: left;\n  margin-right: .5rem; }\n\n.login-form {\n  background-color: #fff;\n  margin-top: .6rem; }\n  .login-form .input-container {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    padding: .6rem .8rem;\n    border-bottom: 1px solid #f1f1f1; }\n    .login-form .input-container input {\n      font-size: 0.7rem;\n      color: #666;\n      text-align: left; }\n  .login-form .captcha-code-container {\n    height: 2.2rem; }\n    .login-form .captcha-code-container .img-change-img {\n      display: flex;\n      justify-content: center;\n      align-items: center; }\n      .login-form .captcha-code-container .img-change-img img {\n        width: 3.5rem;\n        height: 1.5rem;\n        margin-right: .2rem;\n        font-size: .2rem; }\n      .login-form .captcha-code-container .img-change-img .change-img {\n        display: flex;\n        justify-content: center;\n        align-items: center;\n        flex-direction: column;\n        flex-wrap: wrap;\n        width: 2.3rem; }\n        .login-form .captcha-code-container .img-change-img .change-img p {\n          font-size: 0.55rem;\n          color: #666;\n          text-align: left; }\n",""])}}]);